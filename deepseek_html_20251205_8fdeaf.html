<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–î–ª—è —Ç–µ–±—è ‚Äî –ñ–∞–Ω–Ω–µ–ª–∏—è</title>
<style>
  :root{
    --bg:#07061a;
    --card:#0f1630cc;
    --accent:#ffd6ea;
    --soft:#f7f7fb;
    --glass: rgba(255,255,255,0.04);
    --gradient-1: linear-gradient(135deg, #ffd6ea 0%, #ffecf6 25%, #fff2f8 50%, #ffecf6 75%, #ffd6ea 100%);
    --gradient-2: linear-gradient(45deg, rgba(255,214,234,0.1) 0%, rgba(255,236,246,0.05) 50%, rgba(255,242,248,0.1) 100%);
    --gradient-3: radial-gradient(circle at 30% 20%, rgba(255,214,234,0.15) 0%, transparent 50%);
  }
  *{box-sizing:border-box; margin:0; padding:0;}
  body{
    margin:0; font-family: Inter, "Segoe UI", Roboto, system-ui, -apple-system, sans-serif; 
    background: 
      radial-gradient(ellipse at 20% 10%, rgba(255,240,255,0.03), transparent 30%),
      radial-gradient(ellipse at 80% 90%, rgba(255,214,234,0.02), transparent 25%),
      linear-gradient(180deg,#050417 0%, #08102a 100%),
      var(--bg);
    color:var(--soft); -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
    min-height:100vh;
  }

  /* Enhanced stars background */
  .sky{
    position:fixed; inset:0; pointer-events:none; z-index:0;
    background-image:
      radial-gradient(circle at 20% 10%, rgba(255,255,255,0.1) 0 1px, transparent 1px),
      radial-gradient(circle at 60% 30%, rgba(255,255,255,0.07) 0 1px, transparent 1px),
      radial-gradient(circle at 80% 70%, rgba(255,255,255,0.05) 0 1px, transparent 1px),
      radial-gradient(circle at 40% 50%, rgba(255,255,255,0.04) 0 1px, transparent 1px),
      radial-gradient(circle at 10% 80%, rgba(255,255,255,0.06) 0 1px, transparent 1px),
      radial-gradient(circle at 90% 20%, rgba(255,255,255,0.03) 0 1px, transparent 1px);
    background-size: 1200px 800px, 900px 600px, 700px 500px, 1100px 700px, 800px 600px, 1300px 900px;
    animation: twinkle 10s ease-in-out infinite alternate;
    filter: drop-shadow(0 0 8px rgba(255,255,255,0.02));
  }
  
  .sky::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at 50% 50%, rgba(255,214,234,0.02) 0%, transparent 70%);
    z-index: -1;
  }
  
  @keyframes twinkle{
    0%, 100% {opacity:0.7; transform: translateY(0);}
    50% {opacity:1; transform: translateY(-5px);}
  }

  .container{
    position:relative; 
    z-index:2; 
    max-width:1200px; 
    margin:40px auto; 
    padding:28px;
    opacity: 0;
    animation: fadeIn 1.2s ease-out forwards;
    animation-delay: 0.3s;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  header{
    display:flex;
    align-items:center;
    flex-direction:column; 
    gap:18px; 
    margin-bottom:26px;
  }
  
  h1{
    font-size:clamp(24px, 5vw, 36px); 
    margin:0; 
    color:#fff; 
    text-shadow:0 6px 24px rgba(0,0,0,0.6);
    background: var(--gradient-1);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-align: center;
  }
  
  .subtitle{
    color:rgba(255,255,255,0.85); 
    font-size:clamp(14px, 2.5vw, 18px);
    text-align: center;
    max-width: 800px;
    line-height: 1.5;
  }

  /* Star centerpiece */
  .main-star-wrap{
    display:flex;
    align-items:center;
    justify-content:center; 
    margin:18px 0 30px; 
    position:relative;
  }
  
  .star{
    width:clamp(140px, 20vw, 220px); 
    height:clamp(140px, 20vw, 220px); 
    border-radius:50%; 
    background: radial-gradient(circle at 30% 30%, #fff 0 6%, #ffe7f0 6% 22%, #ffd6ea 22% 60%, transparent 60%);
    display:flex;
    align-items:center;
    justify-content:center; 
    box-shadow: 
      0 8px 40px rgba(255,182,210,0.12), 
      inset 0 2px 8px rgba(255,255,255,0.12),
      0 0 60px rgba(255,182,210,0.08);
    transform:scale(1); 
    transition:transform .6s cubic-bezier(.2,.9,.2,1), box-shadow .6s, filter .6s;
    cursor:pointer;
    animation: float 6s ease-in-out infinite;
    filter: brightness(1);
  }
  
  @keyframes float {
    0%, 100% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-10px) scale(1.02); }
  }
  
  .star:hover {
    transform: scale(1.05);
    box-shadow: 
      0 12px 80px rgba(255,182,210,0.25), 
      inset 0 2px 12px rgba(255,255,255,0.15),
      0 0 80px rgba(255,182,210,0.15);
  }
  
  .star[data-active="true"]{ 
    transform:scale(1.08); 
    box-shadow:
      0 12px 80px rgba(255,182,210,0.3),
      0 0 100px rgba(255,182,210,0.2);
    animation: pulse 2s infinite;
    filter: brightness(1.1);
  }
  
  @keyframes pulse{
    0%{transform:scale(1.06) rotate(0deg); box-shadow: 0 12px 80px rgba(255,182,210,0.25);}
    50%{transform:scale(1.1) rotate(2deg); box-shadow: 0 20px 100px rgba(255,182,210,0.35);}
    100%{transform:scale(1.06) rotate(0deg); box-shadow: 0 12px 80px rgba(255,182,210,0.25);}
  }

  .star-label{
    position:absolute; 
    top:56%; 
    transform:translateY(-10%); 
    text-align:center; 
    font-weight:600; 
    color:#fff; 
    text-shadow:0 6px 20px rgba(0,0,0,0.6);
    font-size: clamp(16px, 2.5vw, 20px);
  }

  /* Constellation heart using svg overlay */
  .constellation{
    position:absolute; 
    inset:0; 
    pointer-events:none; 
    z-index:1; 
    display:flex; 
    align-items:center; 
    justify-content:center;
  }

  /* Intro card */
  .intro-card{
    background: var(--gradient-2);
    border-radius:20px; 
    padding:28px; 
    box-shadow:
      0 8px 30px rgba(2,6,23,0.6),
      inset 0 1px 0 rgba(255,255,255,0.05);
    backdrop-filter: blur(12px);
    margin-bottom:28px;
    transition:transform .5s ease, opacity .45s ease;
    border: 1px solid rgba(255,255,255,0.03);
    width: 100%;
    max-width: 900px;
    opacity: 0;
    transform: translateY(20px);
    animation: fadeUp 0.8s ease-out forwards;
    animation-delay: 0.5s;
  }
  
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .intro-card p{
    margin:8px 0 0; 
    font-size:clamp(14px, 2vw, 16px); 
    color:rgba(255,255,255,0.9);
    line-height: 1.6;
  }

  /* Sections grid */
  .grid{
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(350px, 1fr));
    gap:24px; 
    margin-top:10px;
  }
  
  @media(max-width:780px){
    .grid{
      grid-template-columns:1fr;
      gap:20px;
    }
  }

  .card{
    background: var(--gradient-2);
    border-radius:18px; 
    padding:24px; 
    position:relative; 
    overflow:hidden;
    transition: transform .5s cubic-bezier(0.2, 0.8, 0.2, 1), 
                box-shadow .5s cubic-bezier(0.2, 0.8, 0.2, 1),
                opacity .5s ease;
    box-shadow:
      0 6px 28px rgba(5,8,20,0.6),
      inset 0 1px 0 rgba(255,255,255,0.03);
    border: 1px solid rgba(255,255,255,0.03);
    opacity: 0;
    transform: translateY(30px);
  }
  
  .card.visible {
    opacity: 1;
    transform: translateY(0);
  }
  
  .card:hover{ 
    transform:translateY(-8px) scale(1.01); 
    box-shadow:
      0 20px 50px rgba(5,8,20,0.8),
      inset 0 1px 0 rgba(255,255,255,0.05);
  }

  .card h3{
    margin:0 0 12px;
    font-size:clamp(18px, 2.5vw, 22px);
    color: #fff;
    text-shadow: 0 2px 10px rgba(0,0,0,0.3);
  }
  
  .card p{
    margin:0;
    color:rgba(255,255,255,0.85);
    line-height: 1.5;
    font-size: clamp(14px, 1.8vw, 16px);
  }

  /* Buttons */
  .btn{
    display:inline-flex; 
    align-items:center; 
    justify-content: center;
    gap:8px; 
    padding:12px 18px; 
    border-radius:14px; 
    background:var(--gradient-1); 
    color:#2b1020; 
    font-weight:700; 
    cursor:pointer; 
    border:none; 
    box-shadow:
      0 6px 20px rgba(255,174,204,0.15),
      0 2px 4px rgba(0,0,0,0.1);
    transition: transform .3s ease, box-shadow .3s ease, filter .3s ease;
    font-size: clamp(14px, 1.8vw, 16px);
    min-width: 140px;
    text-align: center;
  }
  
  .btn:hover {
    transform: translateY(-3px) scale(1.03);
    box-shadow: 
      0 10px 30px rgba(255,174,204,0.25),
      0 4px 8px rgba(0,0,0,0.15);
    filter: brightness(1.1);
  }
  
  .btn:active {
    transform: translateY(-1px);
  }
  
  .ghost{
    background:transparent;
    border:1px solid rgba(255,255,255,0.08); 
    color:var(--soft); 
    padding:10px 16px; 
    border-radius:12px; 
    cursor:pointer;
    transition: all .3s ease;
    font-size: clamp(13px, 1.8vw, 15px);
  }
  
  .ghost:hover {
    background: rgba(255,255,255,0.05);
    border-color: rgba(255,255,255,0.15);
    transform: translateY(-2px);
  }

  /* Letter modal - IMPROVED */
  .modal{
    position:fixed; 
    inset:0; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    background:rgba(0,0,0,0.85);
    backdrop-filter: blur(15px);
    z-index:50; 
    padding:20px; 
    opacity:0; 
    pointer-events:none; 
    transition:opacity .4s ease;
  }
  
  .modal.open{
    opacity:1; 
    pointer-events:auto;
  }
  
  .letter{
    width:100%; 
    max-width:700px; 
    background: linear-gradient(145deg, rgba(20, 15, 40, 0.95), rgba(15, 10, 30, 0.98));
    border-radius:24px; 
    padding:40px 32px 32px; 
    box-shadow:
      0 25px 80px rgba(0,0,0,0.9),
      inset 0 1px 0 rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.1);
    position: relative;
    transform: translateY(30px) scale(0.95);
    transition: transform .4s cubic-bezier(0.2, 0.8, 0.2, 1);
    max-height: 80vh;
    overflow-y: auto;
  }
  
  .modal.open .letter {
    transform: translateY(0) scale(1);
  }
  
  .letter h2{
    margin:0 0 24px; 
    font-size:32px;
    color: #fff;
    text-align: center;
    background: var(--gradient-1);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    padding-bottom: 12px;
    border-bottom: 2px solid rgba(255,214,234,0.2);
  }
  
  .letter p{
    white-space:pre-line; 
    line-height:1.7; 
    color:rgba(255,255,255,0.95);
    font-size: 18px;
    padding: 10px 0;
    text-align: center;
  }

  .close{
    position:absolute; 
    right:20px; 
    top:20px; 
    background:rgba(255,255,255,0.1); 
    color:#fff; 
    border:0; 
    font-size:24px; 
    cursor:pointer;
    width: 44px;
    height: 44px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all .3s ease;
    z-index: 10;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  
  .close:hover {
    background: rgba(255,255,255,0.2);
    transform: rotate(90deg) scale(1.1);
    box-shadow: 0 6px 20px rgba(0,0,0,0.4);
  }

  /* Flower - redesigned */
  .flower-wrap{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:20px;
  }
  
  .flower-container {
    position: relative;
    width: 200px;
    height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .flower-svg{
    width: 100%;
    height: 100%;
    transition: transform .5s ease, filter .5s ease;
    transform-origin: center;
  }
  
  .flower-petal{
    transition: all .8s cubic-bezier(.2,.9,.2,1);
    transform-origin: 50% 100%;
    opacity: 0.3;
    filter: blur(2px);
  }
  
  .flower-center {
    transition: all .8s ease;
  }
  
  .flower-stage-1 .flower-petal {
    transform: scale(0.5) translateY(40px);
    opacity: 0.2;
    filter: blur(3px) brightness(0.7);
  }
  
  .flower-stage-2 .flower-petal {
    transform: scale(0.85) translateY(15px);
    opacity: 0.6;
    filter: blur(1px) brightness(0.9);
  }
  
  .flower-stage-3 .flower-petal {
    transform: scale(1) translateY(0);
    opacity: 1;
    filter: blur(0) brightness(1.2);
  }
  
  .flower-stage-1 .flower-center {
    transform: scale(0.7);
    opacity: 0.5;
  }
  
  .flower-stage-2 .flower-center {
    transform: scale(0.9);
    opacity: 0.8;
  }
  
  .flower-stage-3 .flower-center {
    transform: scale(1);
    opacity: 1;
  }

  /* Micro-messages - redesigned */
  .micro{
    display:flex;
    flex-direction:column;
    gap:16px; 
    align-items:center;
  }
  
  .micro .box{
    background: var(--gradient-2);
    padding:24px; 
    border-radius:18px; 
    width:100%;
    min-height: 140px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    font-size: 20px;
    font-weight: 500;
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 
      inset 0 2px 12px rgba(255,255,255,0.04),
      0 6px 30px rgba(0,0,0,0.3);
    transition: all .5s ease;
    color: rgba(255,255,255,0.95);
    line-height: 1.6;
  }
  
  .micro .box:hover {
    transform: translateY(-5px);
    box-shadow: 
      inset 0 2px 15px rgba(255,255,255,0.06),
      0 10px 40px rgba(0,0,0,0.4);
  }

  /* Star constellation section - IMPROVED */
  .star-constellation {
    position: relative;
    width: 100%;
    height: 280px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 20px 0;
  }
  
  .main-star-constellation {
    position: absolute;
    width: 100px;
    height: 100px;
    cursor: pointer;
    z-index: 2;
    animation: starPulse 3s infinite ease-in-out;
    filter: drop-shadow(0 0 15px rgba(255,214,234,0.5));
  }
  
  @keyframes starPulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.1); opacity: 0.9; }
  }
  
  .small-star {
    position: absolute;
    width: 44px;
    height: 44px;
    cursor: pointer;
    transition: all .4s ease;
    filter: drop-shadow(0 0 8px rgba(255,214,234,0.4));
    z-index: 1;
  }
  
  .small-star:hover {
    transform: scale(1.4);
    filter: drop-shadow(0 0 15px rgba(255,214,234,0.7));
  }
  
  .star-pos-1 { top: 10%; left: 20%; }
  .star-pos-2 { top: 5%; right: 25%; }
  .star-pos-3 { top: 35%; left: 10%; }
  .star-pos-4 { top: 30%; right: 15%; }
  .star-pos-5 { bottom: 25%; left: 20%; }
  .star-pos-6 { bottom: 20%; right: 25%; }
  .star-pos-7 { bottom: 5%; left: 45%; }

  /* Heart game - redesigned with proper heart shape */
  .big-heart{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:20px;
    padding:32px;
  }
  
  .heart-container {
    position: relative;
    width: 200px;
    height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .heart{
    width: 180px;
    height: 180px;
    cursor: pointer;
    transition: all .4s cubic-bezier(0.2, 0.8, 0.2, 1);
    filter: grayscale(1) brightness(0.5) drop-shadow(0 0 10px rgba(255,214,234,0.2));
    transform: scale(1);
  }
  
  .heart[data-level="1"]{
    filter: grayscale(0.7) brightness(0.7) drop-shadow(0 0 15px rgba(255,200,220,0.4));
  }
  
  .heart[data-level="2"]{
    filter: grayscale(0.4) brightness(0.85) drop-shadow(0 0 25px rgba(255,180,210,0.6));
  }
  
  .heart[data-level="3"]{
    filter: grayscale(0) brightness(1.1) drop-shadow(0 0 35px rgba(255,160,200,0.8));
  }
  
  .heart[data-active="true"]{
    transform:scale(1.1); 
    filter: grayscale(0) brightness(1.3) drop-shadow(0 0 50px rgba(255,120,170,1));
    animation: heartbeat 1.5s infinite;
  }
  
  @keyframes heartbeat {
    0%, 100% { transform: scale(1.05); }
    50% { transform: scale(1.12); }
  }
  
  .heart:hover {
    transform: scale(1.05);
  }

  /* Signature at the bottom */
  .signature {
    text-align: center;
    padding: 40px 20px;
    margin-top: 40px;
    border-top: 1px solid rgba(255,255,255,0.05);
    position: relative;
    z-index: 2;
  }
  
  .signature p {
    font-size: clamp(18px, 3vw, 24px);
    color: #fff;
    margin: 10px 0;
    line-height: 1.6;
    text-shadow: 0 2px 10px rgba(0,0,0,0.3);
  }
  
  .signature p:first-child {
    background: var(--gradient-1);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    font-weight: 700;
  }
  
  .signature p:last-child {
    color: rgba(255,255,255,0.9);
    font-weight: 500;
  }

  /* small helpers */
  .muted{
    color:rgba(255,255,255,0.7); 
    font-size:clamp(12px, 1.8vw, 14px);
  }
  
  .row{
    display:flex;
    gap:12px;
    align-items:center;
    flex-wrap:wrap;
    justify-content: center;
  }
  
  .section-title {
    text-align: center;
    margin-bottom: 30px;
    font-size: clamp(22px, 4vw, 28px);
    background: var(--gradient-1);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 4px 20px rgba(0,0,0,0.3);
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .container {
      padding: 20px;
      margin: 20px auto;
    }
    
    .intro-card {
      padding: 20px;
    }
    
    .card {
      padding: 20px;
    }
    
    .letter {
      padding: 32px 24px 24px;
    }
    
    .star-constellation {
      height: 240px;
    }
    
    .main-star-constellation {
      width: 80px;
      height: 80px;
    }
    
    .small-star {
      width: 36px;
      height: 36px;
    }
    
    .flower-container {
      width: 180px;
      height: 180px;
    }
    
    .heart {
      width: 160px;
      height: 160px;
    }
    
    .signature {
      padding: 30px 20px;
    }
  }
  
  @media (max-width: 480px) {
    .grid {
      gap: 16px;
    }
    
    .card {
      padding: 16px;
    }
    
    .btn, .ghost {
      width: 100%;
      justify-content: center;
    }
    
    .row {
      flex-direction: column;
      align-items: stretch;
    }
    
    .star-constellation {
      height: 200px;
    }
    
    .main-star-constellation {
      width: 70px;
      height: 70px;
    }
    
    .small-star {
      width: 32px;
      height: 32px;
    }
    
    .letter h2 {
      font-size: 26px;
    }
    
    .letter p {
      font-size: 16px;
    }
  }
</style>
</head>
<body>
  <div class="sky" aria-hidden="true"></div>
  <div class="container">
    <header>
      <div class="intro-card">
        <div class="main-star-wrap">
          <div class="star" id="mainStar" role="button" tabindex="0" aria-pressed="false" title="–ù–∞–∂–º–∏, —á—Ç–æ–±—ã –∑–∞–∂–µ—á—å –∑–≤—ë–∑–¥–æ—á–∫—É">
            <!-- Improved star shape -->
            <svg width="86" height="86" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 2l2.8 6.4L21 9l-4.5 4L18 21l-6-3-6 3 1.5-8L3 9l6.2-0.6L12 2z" fill="#fff"/>
            </svg>
          </div>
          <div class="star-label"><strong>–õ—é–±–∏–º–∞—è, —ç—Ç–æ –≤—Å—ë –¥–ª—è —Ç–µ–±—è üí´‚ù§Ô∏è</strong></div>
          <div class="constellation" aria-hidden="true">
            <!-- heart-shaped constellation SVG -->
            <svg width="360" height="220" viewBox="0 0 360 220" fill="none" style="opacity:.9">
              <defs>
                <radialGradient id="g1" cx="50%" cy="50%">
                  <stop offset="0%" stop-color="#fff"/>
                  <stop offset="60%" stop-color="#ffd6ea" stop-opacity="0.7"/>
                </radialGradient>
              </defs>
              <path d="M180 60 C 150 10, 40 20, 80 120 C 110 190, 170 200, 180 210 C 190 200, 250 190, 280 120 C 320 20, 210 10, 180 60 Z" stroke="rgba(255,200,235,0.06)" stroke-width="1.8" fill="none"></path>
              <!-- little stars laid along heart -->
              <g id="tinyStars" fill="url(#g1)">
                <circle cx="140" cy="50" r="3"/>
                <circle cx="160" cy="40" r="2.6"/>
                <circle cx="180" cy="32" r="3.2"/>
                <circle cx="200" cy="38" r="2.4"/>
                <circle cx="220" cy="48" r="2.8"/>
                <circle cx="240" cy="68" r="2.4"/>
                <circle cx="260" cy="92" r="3.2"/>
                <circle cx="280" cy="120" r="2.6"/>
                <circle cx="260" cy="150" r="2.8"/>
                <circle cx="230" cy="175" r="3.2"/>
                <circle cx="200" cy="195" r="2.6"/>
                <circle cx="170" cy="190" r="3"/>
                <circle cx="130" cy="160" r="2.6"/>
                <circle cx="110" cy="120" r="2.8"/>
                <circle cx="120" cy="80" r="3.2"/>
              </g>
            </svg>
          </div>
        </div>
        <p class="subtitle">–ü—Ä–æ–∫—Ä—É—Ç–∏ –≤–Ω–∏–∑ ‚Äî —Ç–∞–º —Ç—ã –Ω–∞–π–¥—ë—à—å –º–∞–ª–µ–Ω—å–∫–∏–µ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ —è —Å–æ–±—Ä–∞–ª —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ–±—è</p>
      </div>
    </header>

    <main class="grid" aria-live="polite">
      <!-- –ü–∏—Å—å–º–∞ –¥–ª—è —Ç–µ–±—è -->
      <section class="card" id="lettersCard" aria-labelledby="lettersTitle">
        <h3 id="lettersTitle">‚úâ –ü–∏—Å—å–º–∞ –¥–ª—è —Ç–µ–±—è, –∫–æ—Ç—ë–Ω–æ–∫ ‚ù§Ô∏è</h3>
        <p class="muted">–ù–∞–∂–º–∏ –Ω–∞ –ª—é–±–æ–µ –ø–∏—Å—å–º–æ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ</p>
        <div style="margin-top:20px; display:flex;flex-direction:column; gap:14px">
          <button class="btn" data-letter="1">–ö–æ–≥–¥–∞ —Ç–µ–±–µ —Ç—è–∂–µ–ª–æ</button>
          <button class="btn" data-letter="2">–ö–æ–≥–¥–∞ —Ç—ã –∑–ª–∏—à—å—Å—è –Ω–∞ —Å–µ–±—è</button>
          <button class="btn" data-letter="3">–ö–æ–≥–¥–∞ —Ç—ã –Ω–µ –≤–∏–¥–∏—à—å —Å–º—ã—Å–ª–∞</button>
          <button class="btn" data-letter="4">–ö–æ–≥–¥–∞ —Ç–µ–±–µ –Ω—É–∂–Ω–∞ –ª—é–±–æ–≤—å</button>
        </div>
      </section>

      <!-- –¶–≤–µ—Ç–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è -->
      <section class="card" id="flowerCard" aria-labelledby="flowerTitle">
        <h3 id="flowerTitle">üå± –¶–≤–µ—Ç–æ–∫ —Ç–≤–æ–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</h3>
        <p class="muted">–í—ã–±–∏—Ä–∞–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Äî —Ü–≤–µ—Ç–æ–∫ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ-–Ω–æ–≤–æ–º—É</p>
        <div class="flower-wrap">
          <div class="flower-container">
            <svg class="flower-svg flower-stage-1" id="flowerSvg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <g transform="translate(100, 100)">
                <!-- –õ–µ–ø–µ—Å—Ç–∫–∏ —Ü–≤–µ—Ç–∫–∞ -->
                <g class="flower-petal" id="petal1">
                  <ellipse rx="20" ry="45" transform="rotate(0) translate(0,-55)" fill="url(#petalGradient)" />
                </g>
                <g class="flower-petal" id="petal2">
                  <ellipse rx="20" ry="45" transform="rotate(45) translate(0,-55)" fill="url(#petalGradient)" />
                </g>
                <g class="flower-petal" id="petal3">
                  <ellipse rx="20" ry="45" transform="rotate(90) translate(0,-55)" fill="url(#petalGradient)" />
                </g>
                <g class="flower-petal" id="petal4">
                  <ellipse rx="20" ry="45" transform="rotate(135) translate(0,-55)" fill="url(#petalGradient)" />
                </g>
                <g class="flower-petal" id="petal5">
                  <ellipse rx="20" ry="45" transform="rotate(180) translate(0,-55)" fill="url(#petalGradient)" />
                </g>
                <g class="flower-petal" id="petal6">
                  <ellipse rx="20" ry="45" transform="rotate(225) translate(0,-55)" fill="url(#petalGradient)" />
                </g>
                <g class="flower-petal" id="petal7">
                  <ellipse rx="20" ry="45" transform="rotate(270) translate(0,-55)" fill="url(#petalGradient)" />
                </g>
                <g class="flower-petal" id="petal8">
                  <ellipse rx="20" ry="45" transform="rotate(315) translate(0,-55)" fill="url(#petalGradient)" />
                </g>
                
                <!-- –¶–µ–Ω—Ç—Ä —Ü–≤–µ—Ç–∫–∞ -->
                <g class="flower-center">
                  <circle r="18" fill="url(#centerGradient)" stroke="#ffd6ea" stroke-width="2"/>
                </g>
              </g>
              
              <!-- –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã -->
              <defs>
                <linearGradient id="petalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#ffd6ea" />
                  <stop offset="50%" stop-color="#ffe7f2" />
                  <stop offset="100%" stop-color="#fff8fb" />
                </linearGradient>
                <radialGradient id="centerGradient" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" stop-color="#fff1f6" />
                  <stop offset="100%" stop-color="#ffd6ea" />
                </radialGradient>
              </defs>
            </svg>
          </div>

          <div class="row">
            <button class="ghost" data-stage="1">–ú–Ω–µ —Ç—è–∂–µ–ª–æ</button>
            <button class="ghost" data-stage="2">–°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á—É—Ç—å –ª—É—á—à–µ</button>
            <button class="ghost" data-stage="3">–ü–æ—è–≤–∏–ª–∞—Å—å –∏—Å–∫—Ä–∞</button>
          </div>
          <div class="muted" id="flowerText" style="margin-top:12px; text-align:center; max-width:380px; line-height:1.6">
            –î–∞–∂–µ —Å–∞–º—ã–º –∫—Ä–∞—Å–∏–≤—ã–º —Ü–≤–µ—Ç–æ—á–∫–∞–º –±—ã–≤–∞–µ—Ç —Ç—è–∂–µ–ª–æ, –ø–æ—ç—Ç–æ–º—É —Ç—ã –º–æ–∂–µ—à—å —Å–µ–π—á–∞—Å –ø–æ–±—ã—Ç—å —Å–æ –º–Ω–æ–π. –í–∏–¥–∏–º–æ –º–æ–µ–º—É —Ü–≤–µ—Ç–æ—á–∫—É –Ω—É–∂–Ω–æ –Ω–∞–±—Ä–∞—Ç—å—Å—è —Å–∏–ª –∏ –ø–æ—ç—Ç–æ–º—É —è –∑–¥–µ—Å—å. –ú—ã –º–æ–∂–µ–º —Ç—è–Ω—É—Ç—å—Å—è –∫ —Å–≤–µ—Ç—É –≤–º–µ—Å—Ç–µ, –Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–±—É–¥—å —Å–æ –º–Ω–æ–π —Å–æ–±–æ–π –∏ –æ—Ç–¥–æ—Ö–Ω–∏, –º–∏–ª–∞—è –º–æ—è ‚ù§Ô∏è
          </div>
        </div>
      </section>

      <!-- –ó–≤—ë–∑–¥–æ—á–∫–∞ –≤ —á–µ—Å—Ç—å —Ç–µ–±—è -->
      <section class="card" id="starCard" aria-labelledby="starTitle">
        <h3 id="starTitle">‚≠ê –ó–≤—ë–∑–¥–æ—á–∫–∞ –≤ —á–µ—Å—Ç—å —Ç–µ–±—è</h3>
        <p class="muted">–ù–∞–∂–º–∏ –Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é –∑–≤—ë–∑–¥–æ—á–∫—É –∏–ª–∏ –º–∞–ª–µ–Ω—å–∫–∏–µ –∑–≤—ë–∑–¥–æ—á–∫–∏ –≤–æ–∫—Ä—É–≥</p>
        
        <div class="star-constellation">
          <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∑–≤–µ–∑–¥–∞ - improved shape -->
          <div class="main-star-constellation" id="mainConstellationStar" title="–ù–∞–∂–º–∏ –Ω–∞ –º–µ–Ω—è">
            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
              <path d="M12 2l2.8 6.4L21 9l-4.5 4L18 21l-6-3-6 3 1.5-8L3 9l6.2-0.6L12 2z" fill="#ffd6ea"/>
            </svg>
          </div>
          
          <!-- –ú–∞–ª–µ–Ω—å–∫–∏–µ –∑–≤–µ–∑–¥—ã –≤–æ–∫—Ä—É–≥ - improved shapes -->
          <div class="small-star star-pos-1" data-star="1">
            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
              <path d="M12 2l1.8 4.2L18 6l-2.4 2.8L17 15l-3.6-1.8L10 15l1.4-6.2L6 6l4.2-0.6L12 2z" fill="#ffe7f2"/>
            </svg>
          </div>
          <div class="small-star star-pos-2" data-star="2">
            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
              <path d="M12 2l1.8 4.2L18 6l-2.4 2.8L17 15l-3.6-1.8L10 15l1.4-6.2L6 6l4.2-0.6L12 2z" fill="#ffe7f2"/>
            </svg>
          </div>
          <div class="small-star star-pos-3" data-star="3">
            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
              <path d="M12 2l1.8 4.2L18 6l-2.4 2.8L17 15l-3.6-1.8L10 15l1.4-6.2L6 6l4.2-0.6L12 2z" fill="#ffe7f2"/>
            </svg>
          </div>
          <div class="small-star star-pos-4" data-star="4">
            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
              <path d="M12 2l1.8 4.2L18 6l-2.4 2.8L17 15l-3.6-1.8L10 15l1.4-6.2L6 6l4.2-0.6L12 2z" fill="#ffe7f2"/>
            </svg>
          </div>
          <div class="small-star star-pos-5" data-star="5">
            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
              <path d="M12 2l1.8 4.2L18 6l-2.4 2.8L17 15l-3.6-1.8L10 15l1.4-6.2L6 6l4.2-0.6L12 2z" fill="#ffe7f2"/>
            </svg>
          </div>
          <div class="small-star star-pos-6" data-star="6">
            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
              <path d="M12 2l1.8 4.2L18 6l-2.4 2.8L17 15l-3.6-1.8L10 15l1.4-6.2L6 6l4.2-0.6L12 2z" fill="#ffe7f2"/>
            </svg>
          </div>
          <div class="small-star star-pos-7" data-star="7">
            <svg width="100%" height="100%" viewBox="0 0 24 24" fill="none">
              <path d="M12 2l1.8 4.2L18 6l-2.4 2.8L17 15l-3.6-1.8L10 15l1.4-6.2L6 6l4.2-0.6L12 2z" fill="#ffe7f2"/>
            </svg>
          </div>
        </div>
        
        <div style="margin-top:20px; display:flex;flex-direction:column;gap:12px;align-items:center;">
          <p class="muted" style="text-align:center;">–ù–∞–∂–º–∏ –Ω–∞ –ª—é–±—É—é –∑–≤–µ–∑–¥—É, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ—Å–ª–∞–Ω–∏–µ</p>
        </div>
      </section>

      <!-- –ú–∞–ª–µ–Ω—å–∫–∏–µ —Ç—ë–ø–ª—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è -->
      <section class="card" id="microCard" aria-labelledby="microTitle">
        <h3 id="microTitle">üéÅ –ú–∞–ª–µ–Ω—å–∫–∏–µ —Ç—ë–ø–ª—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</h3>
        <p class="muted">–ù–∞–∂–∏–º–∞–π, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –∏—Ö 31</p>
        <div class="micro" style="margin-top:20px">
          <div class="box" id="microBox">–¢—ã —Å–∞–º–∞—è –¥–æ–±—Ä–∞—è –¥–µ–≤–æ—á–∫–∞ ‚ù§Ô∏è</div>
          <div class="row" style="margin-top:20px">
            <button class="btn" id="nextMicro">–ü–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</button>
            <button class="ghost" id="shuffleMicro">–ü–æ–º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫</button>
          </div>
        </div>
      </section>

      <!-- –ú–∞–ª–µ–Ω—å–∫–∞—è –∏–≥—Ä–∞ —Å–≤–µ—Ç–∞ -->
      <section class="card big-heart" id="heartCard" aria-labelledby="heartTitle">
        <h3 id="heartTitle">üíñ –ú–∞–ª–µ–Ω—å–∫–∞—è –∏–≥—Ä–∞ —Å–≤–µ—Ç–∞</h3>
        <p class="muted">–ù–∞–∂–º–∏ –Ω–∞ —Å–µ—Ä–¥—Ü–µ ‚Äî –æ–Ω–æ —Å—Ç–∞–Ω–µ—Ç —è—Ä—á–µ</p>
        <div class="heart-container">
          <!-- Improved heart shape -->
          <svg class="heart" id="heart" data-level="0" title="–ù–∞–∂–º–∏ –º–µ–Ω—è" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" 
                  fill="#ffd6ea" 
                  stroke="#ffd6ea" 
                  stroke-width="0.5"/>
          </svg>
        </div>
        <div class="muted" id="heartInfo" style="text-align:center; max-width:320px; margin-top:10px;">
          –°–µ—Ä–¥—Ü–µ —Ç—É—Å–∫–ª–æ–µ ‚Äî –Ω–∞–∂–º–∏ 10 —Ä–∞–∑, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å—é—Ä–ø—Ä–∏–∑
        </div>
      </section>
    </main>
    
    <!-- –ü–æ–¥–ø–∏—Å—å –≤–Ω–∏–∑—É -->
    <div class="signature">
      <p>–Ø –ª—é–±–ª—é —Ç–µ–±—è, –ñ–∞–Ω–Ω–µ–ª—è ‚ù§Ô∏è</p>
      <p>–¢—ã –º–æ–π –≥–ª–∞–≤–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ –≤ —ç—Ç–æ–π –∂–∏–∑–Ω–∏ ‚ù§Ô∏è</p>
    </div>
  </div>

  <!-- letter modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="letter" role="document">
      <button class="close" id="closeModal">‚úï</button>
      <h2 id="modalTitle">–ü–∏—Å—å–º–æ</h2>
      <p id="modalText"></p>
    </div>
  </div>

<script>
// Data from the user (texts)
const letters = {
  1: `–°–æ–ª–Ω—ã—à–∫–æ, —Ç–µ–±–µ –Ω–µ –Ω—É–∂–Ω–æ –±—ã—Ç—å —Å–∏–ª—å–Ω–æ–π —Å–æ –º–Ω–æ–π. –ü—Ä–æ—Å—Ç–æ –ø–æ–¥–æ–π–¥–∏, –¥–∞–∂–µ –º—ã—Å–ª–µ–Ω–Ω–æ ‚Äî —è —Ä—è–¥–æ–º. –î–∞–∂–µ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ —è –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—Å–µ–≥–¥–∞ –±–ª–∏–∂–µ –≤—Å–µ—Ö –∫ —Ç–µ–±–µ –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Å—Ç–∞–≤–ª—é –æ–¥–Ω—É –≤ –±–µ–¥–µ ü•∫\n\n–¢—ã –º–æ–∂–µ—à—å –ø–ª–∞–∫–∞—Ç—å, –º–æ–∂–µ—à—å —É—Å—Ç–∞–≤–∞—Ç—å, –º–æ–∂–µ—à—å –º–æ–ª—á–∞—Ç—å –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç—å ‚Äî —è –≤—Å—ë —Ä–∞–≤–Ω–æ –±—É–¥—É –∑–¥–µ—Å—å. –Ø –±—É–¥—É –æ–±–Ω–∏–º–∞—Ç—å —Ç–µ–±—è —Ç–∞–∫ –∫—Ä–µ–ø–∫–æ, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –º–æ–≥—É ‚ù§Ô∏è\n\n–ò–Ω–æ–≥–¥–∞ –≤—Å—ë –≤–æ–∫—Ä—É–≥ –∫–∞–∂–µ—Ç—Å—è —Ç—è–∂—ë–ª—ã–º‚Ä¶ –Ω–æ —Ç—ã –Ω–µ –æ–¥–Ω–∞ –≤ —ç—Ç–æ–º. –ú—ã –≤–º–µ—Å—Ç–µ. –í—Å–µ–≥–¥–∞ ‚ù§Ô∏è`,
  2: `–¢–µ–±–µ –Ω–µ –Ω—É–∂–Ω–æ –±—ã—Ç—å –∏–¥–µ–∞–ª—å–Ω–æ–π (—Ö–æ—Ç—è –¥–ª—è –º–µ–Ω—è —Ç—ã –∏–¥–µ–∞–ª—å–Ω–∞). –ú—ã –≤—Å–µ –ª—é–¥–∏, –Ω–µ —Ä–æ–±–æ—Ç—ã, –∏ –º–æ–∂–µ–º –æ—à–∏–±–∞—Ç—å—Å—è. –í —ç—Ç–æ–º –Ω–µ—Ç –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, –º–∞–ª—ã—à ü•∫\n\n–Ø –Ω–µ –≤–∏–∂—É –≤ —Ç–µ–±–µ –æ—à–∏–±–æ–∫ ‚Äî —è –≤–∏–∂—É –ø—Ä–µ–∫—Ä–∞—Å–Ω—É—é –¥–µ–≤—É—à–∫—É, –∫–æ—Ç–æ—Ä–∞—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª—É—á—à–µ –∏ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è ‚ù§Ô∏è\n\n–†–∞–∑—Ä–µ—à–∏ —Å–µ–±–µ –±—ã—Ç—å —Å–æ–±–æ–π. –Ø –ª—é–±–ª—é —Ç–µ–±—è –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–π, –∫–∞–∫–∞—è —Ç—ã –µ—Å—Ç—å.\n\n–¢—ã –Ω–∞—Å—Ç–æ—è—â–∞—è ‚Äî –∞ –Ω–∞—Å—Ç–æ—è—â–∞—è —Ç—ã —Å–∞–º–∞—è –¥–æ–±—Ä–∞—è, –ø—Ä–µ–ª–µ—Å—Ç–Ω–∞—è, –∫—Ä–∞—Å–∏–≤–∞—è, —Ç—Ä—É–¥–æ–ª—é–±–∏–≤–∞—è –∏ –æ—á–µ–Ω—å –∑–∞–±–æ—Ç–ª–∏–≤–∞—è –¥–µ–≤–æ—á–∫–∞ ü•∫‚ù§Ô∏è`,
  3: `–°–µ–π—á–∞—Å –º–∏—Ä –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫, –±—É–¥—Ç–æ –≤ –Ω—ë–º –Ω–µ—Ç –º–µ—Å—Ç–∞ —Ä–∞–¥–æ—Å—Ç–∏. –ë—É–¥—Ç–æ –≤—Å—ë –ø–æ–±–ª–µ–∫–ª–æ, –∏ –∫—Ä–∞—Å–∫–∏ –∏—Å—á–µ–∑–∞—é—Ç –ø—Ä—è–º–æ –Ω–∞ –≥–ª–∞–∑–∞—Ö‚Ä¶ –ù–æ —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ, —Ö–æ—Ä–æ—à–æ?\n\n–ö—Ä–∞—Å–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–µ—Ä–Ω—É—Ç—Å—è. –ò –µ—Å–ª–∏ —Ç—ã –ø–æ–∫–∞ –Ω–µ –º–æ–∂–µ—à—å –≤ —ç—Ç–æ –≤–µ—Ä–∏—Ç—å ‚Äî —è –ø–æ–≤–µ—Ä—é –∑–∞ –Ω–∞—Å –¥–≤–æ–∏—Ö.\n\n–ü—Ä–æ—Å—Ç–æ –∑–Ω–∞–π: —Ç–≤–æ—ë —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –º–∏—Ä —Ç–µ–ø–ª–µ–µ –∏ —Å–≤–µ—Ç–ª–µ–µ ‚ù§Ô∏è\n\n–ù–µ –Ω—É–∂–Ω–æ —É–ª—ã–±–∞—Ç—å—Å—è –∏–ª–∏ –¥–µ–ª–∞—Ç—å –≤–∏–¥, —á—Ç–æ —Ç–µ–±–µ –ª—É—á—à–µ. –ü—Ä–æ—Å—Ç–æ –±—É–¥—å –∑–¥–µ—Å—å, –±—É–¥—å —Å–æ–±–æ–π. –Ø —Ä—è–¥–æ–º ‚Äî –≤—Å–µ–≥–¥–∞ ‚Äî –∏ –¥–∞–º —Ç–µ–±–µ —Ç–æ—Ç –ø–æ–∫–æ–π, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–±–µ –Ω—É–∂–µ–Ω. –≠—Ç–æ –º–æ—è —Ü–µ–ª—å.\n\n–¢—ã –¥–ª—è –º–µ–Ω—è –≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ ‚ù§Ô∏è`,
  4: `–°–æ–ª–Ω—ã—à–∫–æ –º–æ—ë, –ø–æ–π–¥—ë–º, —è —Ç–µ–±—è –∫—Ä–µ–µ–µ–µ–ø–∫–æ –∑–∞–æ–±–Ω–∏–º–∞—é ü•π\n\n–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —è —Ä—è–¥–æ–º: —Ç—ã –ª–µ–∂–∏—à—å –Ω–∞ –º–æ–µ–π –≥—Ä—É–¥–∏, –∞ —è –Ω–µ–∂–Ω–æ –≥–ª–∞–∂—É —Ç–µ–±—è –ø–æ –≥–æ–ª–æ–≤–µ ü•∫\n\n–¢—ã –º–æ—è –º–∞–ª–µ–Ω—å–∫–∞—è, —Ö—Ä—É–ø–∫–∞—è –∫–æ—à–µ—á–∫–∞. –ü–æ–∑–≤–æ–ª—å –º–Ω–µ –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ —Ç–µ–±–µ –∏ –∑–∞—Ç–∏—Å–∫–∞—Ç—å —Ç–µ–±—è —Ç–∞–∫ —Å–∏–ª—å–Ω–æ, –∫–∞–∫ —Ç—ã –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å ü•∞\n\n–ù–µ –∑–∞–±—ã–≤–∞–π: –º—ã –µ—Å—Ç—å –¥—Ä—É–≥ —É –¥—Ä—É–≥–∞. –Ø –æ—Ç–ø—Ä–∞–≤–ª—è—é —Ç–µ–±–µ —Å–æ—Ç–Ω—é —Ç—ã—Å—è—á –ø–æ—Ü–µ–ª—É–µ–≤ –∏–∑–¥–∞–ª–µ–∫–∞‚Ä¶ –ò –æ—á–µ–Ω—å —Å–∫–æ—Ä–æ —è —É–∂–µ –±—É–¥—É —Ä—è–¥–æ–º, —á—Ç–æ–±—ã –∑–∞—Ü–µ–ª–æ–≤–∞—Ç—å —Ç–µ–±—è —Å –Ω–æ–≥ –¥–æ –≥–æ–ª–æ–≤—ã ü•π‚ù§Ô∏è`
};

const flowerTexts = {
  1: `–î–∞–∂–µ —Å–∞–º—ã–º –∫—Ä–∞—Å–∏–≤—ã–º —Ü–≤–µ—Ç–æ—á–∫–∞–º –±—ã–≤–∞–µ—Ç —Ç—è–∂–µ–ª–æ, –ø–æ—ç—Ç–æ–º—É —Ç—ã –º–æ–∂–µ—à—å —Å–µ–π—á–∞—Å –ø–æ–±—ã—Ç—å —Å–æ –º–Ω–æ–π. –í–∏–¥–∏–º–æ –º–æ–µ–º—É —Ü–≤–µ—Ç–æ—á–∫—É –Ω—É–∂–Ω–æ –Ω–∞–±—Ä–∞—Ç—å—Å—è —Å–∏–ª –∏ –ø–æ—ç—Ç–æ–º—É —è –∑–¥–µ—Å—å. –ú—ã –º–æ–∂–µ–º —Ç—è–Ω—É—Ç—å—Å—è –∫ —Å–≤–µ—Ç—É –≤–º–µ—Å—Ç–µ, –Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–±—É–¥—å —Å–æ –º–Ω–æ–π —Å–æ–±–æ–π –∏ –æ—Ç–¥–æ—Ö–Ω–∏, –º–∏–ª–∞—è –º–æ—è ‚ù§Ô∏è`,
  2: `–ú–∞–ª—ã—à, —Ç—ã —Ç–∞–∫–∞—è —É–º–Ω–∏—á–∫–∞ —É –º–µ–Ω—è ü•π‚ù§Ô∏è\n–ú–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏ –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã –∏ —è —Ç–∞–∫ –≥–æ—Ä–∂—É—Å—å —Ç–µ–º, —á—Ç–æ —Ç—ã –¥–≤–∏–≥–∞–µ—Ç—Å—è –≤–ø–µ—Ä—ë–¥, —Å–Ω–æ–≤–∞ –¥—ã—à–∏—Ç –Ω–∞–º–Ω–æ–≥–æ –ª–µ–≥—á–µ –∏ —É —Ç–µ–±—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–≤–æ—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –∏—Å–∫—Ä–∞ ü•π\n–¢—ã ‚Äî –º–æ—è –≥–æ—Ä–¥–æ—Å—Ç—å ‚ù§Ô∏è`,
  3: `–í–æ—Ç –æ–Ω–æ ‚Äî —Ç–æ, –∫ —á–µ–º—É –º—ã —Å—Ç—Ä–µ–º–∏–ª–∏—Å—å ü•∫\n–ò—Å–∫—Ä–∞ —Å–Ω–æ–≤–∞ –∑–¥–µ—Å—å, —Ç—ã —Ç–æ–ª—å–∫–æ –ø–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ —ç—Ç–æ ü•π\n–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —ç—Ç–æ–≥–æ, —è –±—É–¥—É –ø–æ–º–æ–≥–∞—Ç—å —Ç–µ–±–µ, –±—É–¥—É—á–∏ —Ä—è–¥–æ–º, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —ç—Ç—É –∏—Å–∫—Ä—É –∏ –¥–∞—Ç—å –µ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–∑–≥–æ—Ä–∞—Ç—å—Å—è –º—è–≥–∫–æ –∏ —Å–ø–æ–∫–æ–π–Ω–æ üíã‚ù§Ô∏è`
};

const starMainText = `–¢—ã ‚Äî –º–æ—è —Å–∞–º–∞—è –ª—é–±–∏–º–∞—è –∑–≤—ë–∑–¥–æ—á–∫–∞ ü•π‚ù§Ô∏è`;
const starMessages = [
  "–¢—ã –¥–µ–ª–∞–µ—à—å –º–æ–π –º–∏—Ä —É—é—Ç–Ω–µ–µ ‚ù§Ô∏è",
  "–¢—ã ‚Äî –º–æ—è –Ω–µ–∂–Ω–æ—Å—Ç—å ‚ù§Ô∏è",
  "–° —Ç–æ–±–æ–π —Ç–µ–ø–ª–µ–µ ‚ù§Ô∏è",
  "–¢—ã ‚Äî –º–æ–π —Å–≤–µ—Ç –¥–∞–∂–µ –≤ —Ç–µ–º–Ω–æ—Ç–µ ‚ù§Ô∏è",
  "–¢—ã —Å–∞–º–∞—è —Ä–æ–¥–Ω–∞—è –¥–ª—è –º–µ–Ω—è ‚ù§Ô∏è",
  "–¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è –ª—É—á—à–µ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚ù§Ô∏è",
  "–¢—ã ‚Äî –º–æ—ë —Å—á–∞—Å—Ç—å–µ, –ñ–∞–Ω–Ω–µ–ª—ë–∫ ‚ù§Ô∏è"
];

let microMessages = [
"–¢—ã —Å–∞–º–∞—è –¥–æ–±—Ä–∞—è –¥–µ–≤–æ—á–∫–∞ ‚ù§Ô∏è","–£ —Ç–µ–±—è —Å–∞–º–æ–µ –∫—Ä–∞—Å–∏–≤–æ–µ —Å–µ—Ä–¥—Ü–µ ‚ù§Ô∏è","–¢—ã —É–º–µ–µ—à—å –ª—é–±–∏—Ç—å –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É ‚ù§Ô∏è","–¢—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –∑–∞–±–æ—Ç–ª–∏–≤–∞—è ‚ù§Ô∏è","–° —Ç–æ–±–æ–π —Ç–∞–∫ —Ç–µ–ø–ª–æ –∏ —Å–ø–æ–∫–æ–π–Ω–æ ‚ù§Ô∏è","–¢—ã –¥–µ–ª–∞–µ—à—å –º–∏—Ä —è—Ä—á–µ –ø—Ä–æ—Å—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—è ‚ù§Ô∏è","–¢—ã –æ—á–µ–Ω—å —Ö—Ä—É–ø–∫–∞—è –∏ –Ω–µ–∂–Ω–∞—è, –∏ —ç—Ç–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ ‚ù§Ô∏è","–¢—ã —Å–∞–º–∞—è —Ç—Ä—É–¥–æ–ª—é–±–∏–≤–∞—è –º–∞–ª—ã—à–∫–∞ ‚ù§Ô∏è","–¢—ã —É–º–µ–µ—à—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ª—É—á—à–µ –≤—Å–µ—Ö ‚ù§Ô∏è","–¢—ã —Å–∞–º–∞—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –¥–µ–≤–æ—á–∫–∞ –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏ ‚ù§Ô∏è","–¢—ã —É–º–µ–µ—à—å —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –≥–ª—É–±–∂–µ, —á–µ–º –¥—Ä—É–≥–∏–µ ‚ù§Ô∏è","–¢–≤–æ—è —É–ª—ã–±–∫–∞ ‚Äî –º–æ–π –ª—é–±–∏–º—ã–π —Å–≤–µ—Ç ‚ù§Ô∏è","–í —Ç–µ–±–µ —Å—Ç–æ–ª—å–∫–æ –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç–∏ ‚ù§Ô∏è","–¢—ã –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—à—å –º–µ–Ω—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å ‚ù§Ô∏è","–¢—ã –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–∞—è, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Ç–∞–∫ –Ω–µ –∫–∞–∂–µ—Ç—Å—è ‚ù§Ô∏è","–¢—ã —É–º–µ–µ—à—å –ª—é–±–∏—Ç—å –≤—Å–µ–π –¥—É—à–æ–π ‚ù§Ô∏è","–¢–≤–æ—è –Ω–µ–∂–Ω–æ—Å—Ç—å ‚Äî —ç—Ç–æ –≤–æ–ª—à–µ–±—Å—Ç–≤–æ ‚ù§Ô∏è","–¢—ã —Ç–∞–∫–∞—è —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –∏ –Ω–∞—Å—Ç–æ—è—â–∞—è ‚ù§Ô∏è","–¢—ã –Ω–∞–ø–æ–ª–Ω—è–µ—à—å –º–µ–Ω—è —Ç–µ–ø–ª–æ–º ‚ù§Ô∏è","–¢—ã ‚Äî –º–æ—ë —Å–∞–º–æ–µ –º—è–≥–∫–æ–µ —á—É–≤—Å—Ç–≤–æ ‚ù§Ô∏è","–¢—ã –æ—á–µ–Ω—å —Å–º–µ–ª–∞—è, —Ö–æ—Ç—å –∏–Ω–æ–≥–¥–∞ –∏ —Å–æ–º–Ω–µ–≤–∞–µ—à—å—Å—è ‚ù§Ô∏è","–¢–≤–æ–∏ –æ–±—ä—è—Ç–∏—è ‚Äî –º–æ–π –¥–æ–º ‚ù§Ô∏è","–¢—ã —Ç–∞–∫–∞—è –º–∞–ª–µ–Ω—å–∫–∞—è –∏ —Ç–∞–∫–∞—è –≤–∞–∂–Ω–∞—è –¥–ª—è –º–µ–Ω—è ‚ù§Ô∏è","–° —Ç–æ–±–æ–π —è —Å—Ç–∞–Ω–æ–≤–ª—é—Å—å –ª—É—á—à–µ ‚ù§Ô∏è","–¢—ã –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –∏—Å–∫—Ä–µ–Ω–Ω—è—è ‚ù§Ô∏è","–¢—ã –ø—Ä–∏–Ω–æ—Å–∏—à—å —Å–≤–µ—Ç –¥–∞–∂–µ –≤ —Å–µ—Ä—ã–µ –¥–Ω–∏ ‚ù§Ô∏è","–¢—ã —É–º–µ–µ—à—å –¥–µ–ª–∞—Ç—å —Å–µ—Ä–¥—Ü–µ —Å–ø–æ–∫–æ–π–Ω—ã–º ‚ù§Ô∏è","–¢—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–µ–µ, —á–µ–º —Å–∞–º–∞ –¥—É–º–∞–µ—à—å ‚ù§Ô∏è","–¢—ã –æ—Å–æ–±–µ–Ω–Ω–∞—è, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è ‚ù§Ô∏è","–¢—ã ‚Äî —á—É–¥–æ, –∫–æ—Ç–æ—Ä–æ–µ —è –±–µ—Ä–µ–∂–Ω–æ –ª—é–±–ª—é ‚ù§Ô∏è","–¢—ã –º–æ—è —Å–∞–º–∞—è –ª—é–±–∏–º–∞—è –¥–µ–≤–æ—á–∫–∞ ‚ù§Ô∏è"
];

// modal controls
const modal = document.getElementById('modal');
const modalText = document.getElementById('modalText');
const modalTitle = document.getElementById('modalTitle');
const closeModal = document.getElementById('closeModal');
document.querySelectorAll('[data-letter]').forEach(b => {
  b.addEventListener('click', ()=> openLetter(b.dataset.letter));
});
closeModal.addEventListener('click', closeLetter);
modal.addEventListener('click', (e)=>{ if(e.target===modal) closeLetter(); });

function openLetter(id){
  modalTitle.textContent = document.querySelector(`[data-letter="${id}"]`).textContent;
  modalText.textContent = letters[id];
  modal.classList.add('open');
  modal.setAttribute('aria-hidden','false');
  document.body.style.overflow = 'hidden';
}
function closeLetter(){
  modal.classList.remove('open');
  modal.setAttribute('aria-hidden','true');
  document.body.style.overflow = 'auto';
}

// main star interaction
const mainStar = document.getElementById('mainStar');
mainStar.addEventListener('click', ()=> toggleStar());
mainStar.addEventListener('keydown', (e)=> { if(e.key==='Enter' || e.key===' ') toggleStar(); });

function toggleStar(){
  const active = mainStar.getAttribute('data-active') === 'true';
  mainStar.setAttribute('data-active', String(!active));
  if(!active){
    showTempMessage(starMainText, 3500);
  }
}

// star constellation interaction
const mainConstellationStar = document.getElementById('mainConstellationStar');
mainConstellationStar.addEventListener('click', () => {
  showTempMessage(starMainText, 3500);
});

document.querySelectorAll('.small-star').forEach((star, index) => {
  star.addEventListener('click', () => {
    showTempMessage(starMessages[index], 3000);
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏
    star.style.transform = 'scale(1.5)';
    star.style.filter = 'drop-shadow(0 0 20px rgba(255,214,234,0.9))';
    setTimeout(() => {
      star.style.transform = 'scale(1.4)';
      star.style.filter = 'drop-shadow(0 0 15px rgba(255,214,234,0.7))';
    }, 200);
  });
});

function showTempMessage(text, ms=2500){
  const prev = document.getElementById('tempMsg');
  if(prev){ prev.remove(); }
  const el = document.createElement('div');
  el.id='tempMsg';
  el.style.position='fixed';
  el.style.left='50%';
  el.style.bottom='120px';
  el.style.transform='translateX(-50%) translateY(20px)';
  el.style.padding='18px 28px';
  el.style.borderRadius='18px';
  el.style.background='linear-gradient(145deg, rgba(25, 20, 45, 0.95), rgba(20, 15, 35, 0.98))';
  el.style.boxShadow='0 20px 60px rgba(0,0,0,0.8)';
  el.style.color='#fff';
  el.style.zIndex=50;
  el.style.fontWeight=600;
  el.style.fontSize='19px';
  el.style.backdropFilter='blur(15px)';
  el.style.border='1px solid rgba(255,255,255,0.15)';
  el.style.textAlign='center';
  el.style.maxWidth='85%';
  el.style.opacity='0';
  el.textContent = text;
  document.body.appendChild(el);
  
  // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
  setTimeout(() => {
    el.style.opacity = '1';
    el.style.transform = 'translateX(-50%) translateY(0)';
    el.style.transition = 'opacity 0.3s ease, transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)';
  }, 10);
  
  setTimeout(()=> {
    el.style.opacity = '0';
    el.style.transform = 'translateX(-50%) translateY(-20px)';
    setTimeout(()=> el.remove(), 300);
  }, ms - 300);
}

// flower stages
const flowerSvg = document.getElementById('flowerSvg');
const flowerText = document.getElementById('flowerText');
document.querySelectorAll('[data-stage]').forEach(btn=>{
  btn.addEventListener('click', ()=> {
    const s = btn.dataset.stage;
    flowerSvg.classList.remove('flower-stage-1','flower-stage-2','flower-stage-3');
    flowerSvg.classList.add('flower-stage-'+s);
    flowerText.textContent = flowerTexts[s];
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞
    flowerSvg.style.transform = 'scale(1.1) rotate(5deg)';
    setTimeout(() => {
      flowerSvg.style.transform = 'scale(1) rotate(0deg)';
    }, 300);
  });
});

// micro messages
const microBox = document.getElementById('microBox');
const nextMicro = document.getElementById('nextMicro');
const shuffleMicro = document.getElementById('shuffleMicro');
let currentMicroIndex = 0;

function pickMicro(){
  if(microMessages.length===0){ 
    microBox.textContent = "–Ø –≤—Å–µ–≥–¥–∞ —Å —Ç–æ–±–æ–π ‚ù§Ô∏è"; 
    return; 
  }
  
  // –ï—Å–ª–∏ –¥–æ—à–ª–∏ –¥–æ –∫–æ–Ω—Ü–∞ –º–∞—Å—Å–∏–≤–∞, –Ω–∞—á–∏–Ω–∞–µ–º —Å–Ω–∞—á–∞–ª–∞
  if(currentMicroIndex >= microMessages.length) {
    currentMicroIndex = 0;
  }
  
  const text = microMessages[currentMicroIndex];
  microBox.textContent = text;
  
  // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
  microBox.style.opacity = '0';
  microBox.style.transform = 'translateY(10px) scale(0.98)';
  setTimeout(() => {
    microBox.style.opacity = '1';
    microBox.style.transform = 'translateY(0) scale(1)';
    microBox.style.transition = 'opacity 0.3s ease, transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1)';
  }, 10);
  
  currentMicroIndex++;
}
nextMicro.addEventListener('click', pickMicro);
shuffleMicro.addEventListener('click', ()=>{
  // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤
  for (let i = microMessages.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [microMessages[i], microMessages[j]] = [microMessages[j], microMessages[i]];
  }
  
  currentMicroIndex = 0;
  showTempMessage('–ü–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–º–µ—à–∞–Ω', 1500);
});

// heart game
const heart = document.getElementById('heart');
const heartInfo = document.getElementById('heartInfo');
let heartCount = 0;
heart.addEventListener('click', ()=>{
  heartCount++;
  const level = Math.min(3, Math.ceil(heartCount/4)); // 0..3
  heart.setAttribute('data-level', String(level));
  
  if(heartCount>=10){
    heart.setAttribute('data-active','true');
    heartInfo.textContent = '–í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –º–æ—ë —Å–µ—Ä–¥—Ü–µ –ø–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–µ–±—è –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏ ‚ò∫Ô∏èüíã';
    showTempMessage('–í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –º–æ—ë —Å–µ—Ä–¥—Ü–µ –ø–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–µ–±—è –≤ –º–æ–µ–π –∂–∏–∑–Ω–∏ ‚ò∫Ô∏èüíã', 4000);
  } else {
    heartInfo.textContent = `–°–µ—Ä–¥—Ü–µ —Ç—É—Å–∫–ª–æ–µ ‚Äî –Ω–∞–∂–º–∏ ${10-heartCount} —Ä–∞–∑, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Å—é—Ä–ø—Ä–∏–∑`;
  }
  
  // –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏
  heart.style.transform = 'scale(1.15)';
  setTimeout(() => {
    heart.style.transform = 'scale(1.1)';
  }, 150);
});

// –ü–æ—è–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
const cards = document.querySelectorAll('.card');
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
    }
  });
}, observerOptions);

cards.forEach(card => {
  observer.observe(card);
});

// accessibility: close with Esc
document.addEventListener('keydown', (e)=>{ 
  if(e.key==='Escape') closeLetter(); 
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
window.addEventListener('load', () => {
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É —Å—Ä–∞–∑—É
  if (cards.length > 0) {
    cards[0].classList.add('visible');
  }
  
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–∏–∫—Ä–æ—Å–æ–æ–±—â–µ–Ω–∏—è
  currentMicroIndex = Math.floor(Math.random() * microMessages.length);
  pickMicro();
});
</script>
</body>
</html>